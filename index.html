<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>분양상담사 DB광고용 자체폼 (Airtable 한글컬럼 연동)</title>
  <meta name="viewport" content="width=420, initial-scale=1.0, maximum-scale=1.0">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.css"/>
  <style>
    body { background: #111 !important; font-family: 'Pretendard', Arial, sans-serif; }
    .card-box { width:100%; max-width:420px; margin:48px auto 0; border-radius:18px; background:#fff; box-shadow:0 8px 24px rgba(0,0,0,0.17); overflow:hidden; display:flex; flex-direction:column; padding:0;}
    .banner-area { width:100%; aspect-ratio:3/2; background:#212533; display:flex; align-items:center; justify-content:center; overflow:hidden;}
    .banner-area img { width:100%; height:100%; object-fit:cover; display:block;}
    .swiper-wrap-area { width:100%; aspect-ratio:420/500; background:#222; position:relative; padding-bottom:32px;}
    .swiper-container { width:100%; height:100%; border-radius:0; background:#181818; position:relative;}
    .swiper-slide img { width:100%; height:100%; aspect-ratio:420/500; object-fit:cover; object-position:center; background:#191919; display:block; border-radius:0;}
    .swiper-pagination { bottom:-26px !important; position:absolute !important; left:0; right:0; width:100%; z-index:10; pointer-events:auto;}
    .swiper-pagination-bullet { width:9px; height:9px; margin:0 3px !important; border-radius:50%; background:radial-gradient(circle at 60% 35%, #FFF8DC 40%, #FFD700 70%, #D4AF37 100%); box-shadow:0 0 4px #ffd700bb, 0 0 1px #D4AF37, 0 1px 0 #fffbe6; opacity:1; border:1.4px solid #d4af37; transition:transform 0.17s, box-shadow 0.2s;}
    .swiper-pagination-bullet-active { background:radial-gradient(circle at 55% 30%, #fffbe6 30%, #FFD700 68%, #bfa333 100%); box-shadow:0 0 12px 3px #ffe066bb, 0 0 2px #FFD700, 0 2px 0 #fffbe6; border:1.7px solid #FFD700; transform:scale(1.35); opacity:1;}
    .swiper-button-next,.swiper-button-prev { color:transparent !important; background:none !important; width:46px; height:46px; top:50%; transform:translateY(-50%); border:none !important; box-shadow:none !important; display:flex; align-items:center; justify-content:center; z-index:10; transition:filter 0.15s; cursor:pointer;}
    .swiper-button-next:hover,.swiper-button-prev:hover { filter:drop-shadow(0 0 10px #ffd70099) drop-shadow(0 0 2px #fffbe6);}
    .swiper-button-next::after,.swiper-button-prev::after { content:''; display:block; width:34px; height:34px; background-repeat:no-repeat; background-size:contain; background-position:center;}
    .swiper-button-next::after { background-image:url('data:image/svg+xml;utf8,<svg width="34" height="34" viewBox="0 0 34 34" fill="none" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="gold1" x1="0" y1="0" x2="34" y2="34" gradientUnits="userSpaceOnUse"><stop stop-color="%23FFF8DC"/><stop offset="0.33" stop-color="%23FFD700"/><stop offset="0.66" stop-color="%23D4AF37"/><stop offset="1" stop-color="%23FFFBE6"/></linearGradient></defs><path d="M10 7 L24 17 L10 27" stroke="url(%23gold1)" stroke-width="4.2" stroke-linecap="round" stroke-linejoin="round"/></svg>');}
    .swiper-button-prev::after { background-image:url('data:image/svg+xml;utf8,<svg width="34" height="34" viewBox="0 0 34 34" fill="none" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="gold2" x1="34" y1="0" x2="0" y2="34" gradientUnits="userSpaceOnUse"><stop stop-color="%23FFF8DC"/><stop offset="0.33" stop-color="%23FFD700"/><stop offset="0.66" stop-color="%23D4AF37"/><stop offset="1" stop-color="%23FFFBE6"/></linearGradient></defs><path d="M24 7 L10 17 L24 27" stroke="url(%23gold2)" stroke-width="4.2" stroke-linecap="round" stroke-linejoin="round"/></svg>');}
    @media (max-width:480px) { .card-box{max-width:98vw;}.banner-area{aspect-ratio:3/2;}.swiper-wrap-area{aspect-ratio:4/5;}.swiper-button-next,.swiper-button-prev{width:30px;height:30px;}.swiper-button-next::after,.swiper-button-prev::after{width:20px;height:20px;}.swiper-pagination{bottom:-19px !important;}.swiper-pagination-bullet{width:7px;height:7px;margin:0 2px !important;}.swiper-pagination-bullet-active{transform:scale(1.21);}}
    .form-area{width:100%; box-sizing:border-box; padding:28px 28px 20px 28px; background:#fff; display:flex; flex-direction:column; gap:12px;}
    .form-area label{font-weight:700;margin-bottom:3px;font-size:1.06rem;}
    .form-area input[type="text"],.form-area input[type="tel"],.form-area select{width:100%;padding:13px 14px;border:1.7px solid #e5c100;border-radius:8px;font-size:1.08rem;background:#fff;color:#222;font-weight:700;transition:border 0.19s, background 0.18s;box-sizing:border-box;outline:none;margin-bottom:0;letter-spacing:0.02em;}
    .form-area input:focus,.form-area select:focus{border:1.9px solid #FFD700;background:#fffbe6;color:#bfa333;}
    .form-area select{cursor:pointer;appearance:none;-webkit-appearance:none;background-image:url("data:image/svg+xml;utf8,<svg fill='gray' height='16' viewBox='0 0 24 24' width='16' xmlns='http://www.w3.org/2000/svg'><path d='M7 10l5 5 5-5z'/></svg>");background-repeat:no-repeat;background-position:right 12px center;background-size:19px;}
    .form-area button{width:100%;padding:17px 0 15px 0;margin-top:10px;background:linear-gradient(95deg,#FFD700 0%,#fffbe6 31%,#FFD700 71%,#d4af37 100%);color:#201b05;font-size:1.22rem;font-weight:900;letter-spacing:0.08em;border:2.5px solid #bfa333;border-radius:10px;box-shadow:0 2px 18px #fffbe6cc,0 0 9px #ffd70099;text-shadow:0 1.5px 3px #fffbe6b5,0 1px 0px #fff;position:relative;overflow:hidden;cursor:pointer;transition:background 0.19s, box-shadow 0.16s, color 0.13s, border 0.13s;}
    .form-area button::after{content:'';display:block;position:absolute;top:9px;left:7%;width:86%;height:19%;background:linear-gradient(90deg,rgba(255,255,255,0.78) 0%,rgba(255,255,255,0.11) 100%);border-radius:11px 11px 9px 9px;opacity:0.5;pointer-events:none;z-index:1;}
    .form-area button:hover{background:linear-gradient(92deg,#fffbe6 0%,#FFD700 44%,#ffd700 98%,#fffbe6 100%);color:#6c5300;box-shadow:0 5px 19px #ffe066,0 0 8px #fffbe6c9;border-color:#FFD700;}
    .agree-wrap{background:#f8fafc;border:1px solid #e3e6ed;border-radius:8px;padding:12px 14px 8px 14px;margin-bottom:8px;font-size:0.97rem;color:#222b44;display:flex;flex-direction:column;gap:2px;}
    .agree-row{display:flex;align-items:flex-start;gap:8px;}
    .agree-label{font-weight:700;margin:0;display:block;line-height:1.7;color:#222b44;}
    .agree-link{color:#FFD700;font-weight:700;font-size:0.98em;cursor:pointer;text-decoration:underline;border:none;background:none;padding:0;transition:color 0.13s;outline:none;letter-spacing:-0.01em;display:inline-block;vertical-align:middle;white-space:nowrap;margin-left:0;margin-top:1px;}
    .agree-link:focus,.agree-link:hover{color:#FFD700;text-decoration:underline;}
    .agree-detail{margin-top:9px;padding:11px 8px 3px 2px;background:#f3f5fa;border-radius:7px;color:#525f77;font-size:0.95rem;display:none;line-height:1.7;}
    .agree-detail.show{display:block;animation:fadeIn 0.28s;}
    @keyframes fadeIn{0%{opacity:0;transform:translateY(-10px);}100%{opacity:1;transform:translateY(0);}}
    @media (max-width:480px){body{background:#181818 !important;}.card-box{max-width:98vw;}.banner-area{aspect-ratio:3/2;}.swiper-wrap-area{aspect-ratio:4/5;}.form-area{padding:18px 10px 10px 10px;}.agree-wrap{font-size:0.94rem;}.agree-label{font-size:0.98em;}}
  </style>
</head>
<body>
  <div class="card-box">
    <!-- 배너 영역 (3:2 비율) -->
    <div class="banner-area">
      <img src="banner.jpg" alt="배너" />
    </div>
    <!-- Swiper 이미지 영역 -->
    <div class="swiper-wrap-area">
      <div class="swiper-container">
        <div class="swiper-wrapper">
          <div class="swiper-slide"><img src="slide1.jpg" alt="광고1" /></div>
          <div class="swiper-slide"><img src="slide2.jpg" alt="광고2" /></div>
          <div class="swiper-slide"><img src="slide3.jpg" alt="광고3" /></div>
          <div class="swiper-slide"><img src="slide4.jpg" alt="광고4" /></div>
          <div class="swiper-slide"><img src="slide5.jpg" alt="광고5" /></div>
        </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
      </div>
    </div>
    <!-- 입력폼 영역 -->
    <form class="form-area" id="consultForm" autocomplete="off">
      <label for="name">성함</label>
      <input type="text" id="name" name="name" placeholder="이름 입력" required />
      <label for="phone">전화번호</label>
      <input type="tel" id="phone" name="phone" placeholder="010-0000-0000" maxlength="13" required autocomplete="tel" inputmode="tel" />
      <label for="reserveTime">상담 예약 시간</label>
      <select id="reserveTime" name="reserveTime" required>
        <option value="" disabled selected>시간 선택</option>
        <option value="08">08시</option>
        <option value="09">09시</option>
        <option value="10">10시</option>
        <option value="11">11시</option>
        <option value="12">12시</option>
        <option value="13">13시</option>
        <option value="14">14시</option>
        <option value="15">15시</option>
        <option value="16">16시</option>
        <option value="17">17시</option>
        <option value="18">18시</option>
        <option value="19">19시</option>
        <option value="20">20시</option>
        <option value="21">21시</option>
        <option value="22">22시</option>
      </select>
      <!-- 개인정보 동의 체크+펼침 -->
      <div class="agree-wrap">
        <div class="agree-row">
          <input type="checkbox" id="agreeChk" required style="margin-top:3px;" />
          <div>
            <label for="agreeChk" class="agree-label">
              개인정보 수집·이용 및 제3자 제공 동의 <span style="color:#ee2020;">(필수)</span>
            </label>
            <span class="agree-link" onclick="toggleDetail()" tabindex="0" role="button" aria-expanded="false">[더보기]</span>
          </div>
        </div>
        <div id="agreeDetail" class="agree-detail" aria-hidden="true">
          <b>■ 개인정보 수집·이용 및 제3자 제공 안내</b><br>
          1. <b>수집항목</b> : 성함, 전화번호, 상담 예약 시간, 날짜<br>
          2. <b>수집·이용목적</b> : 분양상담, 안내, 사은품 지급, 서비스 품질관리<br>
          3. <b>보유·이용기간</b> : 상담 완료일로부터 1년 후 즉시 파기<br>
          4. <b>제공받는 자</b> : 분양사무소, 제휴/협력업체 등<br>
          5. <b>제공목적</b> : 분양상담, 안내, 사은품 발송 등<br>
          6. <b>동의거부 권리 및 불이익</b> : 귀하는 동의를 거부할 권리가 있으며, 동의 거부 시 상담 및 혜택 안내가 제한될 수 있습니다.<br>
        </div>
      </div>
      <button type="submit">상담 신청</button>
    </form>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.js"></script>
  <script>
    const swiper = new Swiper('.swiper-container', {
      effect: "coverflow",
      grabCursor: true,
      centeredSlides: true,
      slidesPerView: "auto",
      coverflowEffect: {
        rotate: 20,
        stretch: 0,
        depth: 180,
        modifier: 1,
        slideShadows: false,
      },
      pagination: {
        el: ".swiper-pagination",
        clickable: true,
      },
      navigation: {
        nextEl: ".swiper-button-next",
        prevEl: ".swiper-button-prev",
      },
      loop: true,
    });

    // 전화번호 하이픈 자동 입력
    document.getElementById('phone').addEventListener('input', function () {
      let value = this.value.replace(/[^0-9]/g, '');
      let result = '';
      if (value.length < 4) {
        result = value;
      } else if (value.length < 8) {
        result = value.substr(0, 3) + '-' + value.substr(3);
      } else if (value.length < 11) {
        result = value.substr(0, 3) + '-' + value.substr(3, 3) + '-' + value.substr(6);
      } else {
        result = value.substr(0, 3) + '-' + value.substr(3, 4) + '-' + value.substr(7, 4);
      }
      this.value = result;
    });

    function toggleDetail() {
      const detail = document.getElementById('agreeDetail');
      const btn = document.querySelector('.agree-link');
      const isOpen = detail.classList.contains('show');
      if (isOpen) {
        detail.classList.remove('show');
        btn.innerText = '[더보기]';
        btn.setAttribute('aria-expanded', 'false');
        detail.setAttribute('aria-hidden', 'true');
      } else {
        detail.classList.add('show');
        btn.innerText = '[닫기]';
        btn.setAttribute('aria-expanded', 'true');
        detail.setAttribute('aria-hidden', 'false');
      }
    }

    // Airtable 연동 세팅 (본인 정보로 교체)
    const AIRTABLE_API_URL = "https://api.airtable.com/v0/베이스ID/테이블명";
    const AIRTABLE_API_KEY = "발급받은_API_KEY";

    document.getElementById('consultForm').addEventListener('submit', function(e) {
      e.preventDefault();
      const name = document.getElementById('name').value.trim();
      const phone = document.getElementById('phone').value.trim();
      const reserveTime = document.getElementById('reserveTime').value;
      const agree = document.getElementById('agreeChk').checked;
      if (!name || !phone || !reserveTime || !agree) {
        alert('필수 정보를 모두 입력해주세요.');
        return false;
      }
      // 한글 필드명으로 payload 작성
const payload = {
  "성함": name,
  "전화번호": phone,
  "상담 예약 시간": reserveTime,
  "날짜": new Date().toISOString().split('T')[0]  // "2025-07-18" 형식으로 잘림
};
fetch("https://airtable-proxy-sand.vercel.app/api/submit", {
  method: "POST",
  headers: { "Content-Type": "application/json" },
  body: JSON.stringify({ fields: payload }) // ❌ 이렇게 보내면 안됨
})
.then(res => res.json())
.then(data => {
  console.log('[상담신청 완료] 응답:', data);
  alert("상담 신청이 정상적으로 접수되었습니다.");
  document.getElementById('consultForm').reset();
})
.catch(error => {
  console.error('[상담신청 에러]', error);
  alert("신청 중 오류가 발생했습니다. (F12에서 에러 확인)");
});
    });
  </script>
</body>
</html>
